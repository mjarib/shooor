<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body class="bg-slate-50 font-['Tajawal']">
    <div class="max-w-6xl mx-auto p-6">
        <button onclick="location.href='index.html'" class="mb-6 text-blue-900 font-bold">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <div class="relative mb-10">
            <input type="text" id="searchInput" onkeyup="filterExperts()" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯ÙˆÙ„Ø©ØŒ Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø£Ùˆ Ø­Ø§Ù„Ø© ØµØ­ÙŠØ©..." class="w-full p-6 rounded-3xl border-2 border-slate-200 shadow-lg outline-none focus:border-blue-900 text-lg">
        </div>
        <div id="expertsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>
    <script src="config.js"></script>
    <script>
        const type = new URLSearchParams(window.location.search).get('type');
        async function load() {
            const snap = await db.collection("experts").where("category", "==", type).where("isApproved", "==", true).get();
            const grid = document.getElementById('expertsGrid');
            snap.forEach(doc => {
                const d = doc.data();
                grid.innerHTML += `
                <div class="expert-card bg-white p-8 rounded-[3rem] shadow-md hover:shadow-2xl transition-all cursor-pointer border-b-8 border-blue-900" onclick="location.href='expert.html?id=${doc.id}'" data-tags="${d.tags.join(',')}">
                    <div class="flex justify-between items-center mb-4"><span class="bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-xs font-black">â­ ${d.rating || 5.0}</span><span class="text-3xl">ğŸ‘¤</span></div>
                    <h3 class="font-black text-blue-900 text-xl mb-2">${d.name}</h3>
                    <p class="text-sm text-slate-500 font-bold leading-relaxed mb-4">${d.summary}</p>
                </div>`;
            });
        }
        function filterExperts() {
            let val = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.expert-card').forEach(card => {
                card.style.display = card.dataset.tags.toLowerCase().includes(val) ? "block" : "none";
            });
        }
        load();
    </script>
</body>
</html>
